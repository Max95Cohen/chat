<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

nfv
</body>
</html>


<script>

    let socket = new WebSocket('ws://127.0.0.1:9502/');
    // let socket = new WebSocket('wss://chat.indigo24.xyz:9505');
    let myUserId = 116222;
    let YerbolatUserId = 113629;

    let chatList = false;
    var user_id = 1;
    var chat_id = 18503;
    var userToken = '14a4026d2038ff66f041d172ee33891e82b55425';
    var message_id = "message:30220:40";

    //908102
    socket.addEventListener('open', function (event) {

        socket.send(JSON.stringify({
            cmd: 'init',
            data: {
                user_id: user_id,
                userToken: userToken,
                validation:true,
            }

        }));

        // socket.send(JSON.stringify({
        //     cmd: 'test:ping',
        //     data: {
        //         user_id: user_id,
        //         userToken: userToken,
        //     }
        //
        // }));


        // проверяет контакты пользователя
        // check user phone exists
        // socket.send(JSON.stringify({
        //     cmd: 'user:check',
        //     data: {
        //         user_id: user_id,
        //         userToken: userToken,
        //         validation: true,
        //         // phone:'77714010175',
        //     }
        //
        // }));

        // создает чат
        // socket.send(JSON.stringify({
        //     cmd: 'chat:create',
        //     data: {
        //         user_id: user_id,
        //         userToken: userToken,
        //         user_ids:'105744,1114,30220',
        //         chat_name:"sad name",
        //         type:1,
        //     }
        //
        // }));
        //

        var images = [{filename: "CjzcZxeEqFKLYAN3wkMt8CTSs0Md6oe.mp3"}];
        var messIds = [];
        var stickerId = [{"stick_id":12}]



        // socket.send(JSON.stringify({
        //     cmd: 'check:user:id',
        //     data: {
        //         user_id: user_id,
        //         userToken: userToken,
        //         validation: true,
        //         check_user_id:40,
        //     }
        // }));

        socket.send(JSON.stringify({
            cmd: 'chat:pinned',
            data: {
                user_id: user_id,
                userToken: userToken,
                // validation: true,
                chat_id:chat_id
            }
        }));



        // // let iCount = 10;
        // // for (let i = 0; i < iCount; i++) {
        //     socket.send(JSON.stringify({
        //         cmd: 'message:create',
        //         data: {
        //             user_id: user_id,
        //             userToken: userToken,
        //             chat_id: chat_id,
        //             message_type: 3,
        //             attachments:images,
        //         }
        //     }));
            //
        // }
        //
        // let RequestChatCount = Math.ceil(iCount / 20);
        // // console.log(RequestChatCount);
        // // for ( let j = 0; j<= RequestChatCount;j++) {
        //     socket.send(JSON.stringify({
        //         cmd: 'chat:get',
        //         data: {
        //             user_id: user_id,
        //             chat_id:chat_id,
        //             page:1,
        //             // divider:1,
        //             userToken: userToken,
        //         }
        //     }));
        // }

        //message:deleted:all

        // socket.send(JSON.stringify({
        //     cmd: 'message:deleted:all',
        //     data: {
        //         user_id:user_id,
        //         userToken: userToken,
        //         chat_id:chat_id,
        //         message_id:message_id,
        //     }
        //
        // }));
        //message:delete:one Удаление сообщения у самого себя

        // socket.send(JSON.stringify({
        //     cmd: 'message:delete:self',
        //     data: {
        //         user_id:user_id,
        //         userToken: userToken,
        //         message_id:message_id,
        //     }
        //
        // }));

        // // // получение всех чатов с пагинацией
        // socket.send(JSON.stringify({
        //     cmd: 'chats:get',
        //     data: {
        //         user_id: user_id,
        //         page:1,
        //         userToken: userToken,
        //     }
        //
        // }));

        // socket.send(JSON.stringify({
        //     cmd: 'chat:message:by:type',
        //     data: {
        //         user_id: user_id,
        //         page:1,
        //         userToken: userToken,
        //         chat_id:5,
        //         type:'files'
        //         // audio media files links
        //     }
        //     //Links
        // }));

        // // получение одного чата
        // socket.send(JSON.stringify({
        //     cmd: 'chat:get',
        //     data: {
        //         user_id: user_id,
        //         chat_id:chat_id,
        //         page:1,
        //         // divider:1,
        //         userToken: userToken,
        //     }
        // }));

        // socket.send(JSON.stringify({
        //     cmd: 'chat:members:privileges',
        //     data: {
        //         user_id: 1,
        //         chat_id:27843,
        //         role:2,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //         members:"40",
        //     }
        //
        // }));
        //chat:members:delete

        // удаление подписчика
        // socket.send(JSON.stringify({
        //     cmd: 'chat:members:delete',
        //     data: {
        //         user_id: user_id,
        //         chat_id:chat_id,
        //         userToken: userToken,
        //         member_id:1114,
        //     }
        //
        // }));


        // сделать сообщение прочитанным


        // socket.send(JSON.stringify({
        //     cmd: 'message:write',
        //     data: {
        //         user_id: user_id,
        //         chat_id: 16,
        //         message_id: message_id,
        //         userToken: userToken,
        //         validate:true
        //     }
        //
        // }));
        //
        // socket.send(JSON.stringify({
        //     cmd: 'user:writing',
        //     data: {
        //         user_id: user_id,
        //         chat_id:chat_id,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        //
        // }));


        // принимает строкой список всех пользователей чей онлайн нужно проверить
        // socket.send(JSON.stringify({
        //     cmd: 'user:check:online',
        //     data: {
        //         user_id: 30220,
        //         users_ids:'40,6',
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        //
        // }));


        // выводит список пользователей из чата
        // socket.send(JSON.stringify({
        //     cmd: 'chat:members',
        //     data: {
        //         user_id: user_id,
        //         chat_id:5,
        //         userToken: userToken,
        //     }
        //
        // }));

        // проверяет есть ли пользователь в чате


        // socket.send(JSON.stringify({
        //     cmd: 'chat:members:check',
        //     data: {
        //         user_id: 1,
        //         chat_id:18482,
        //         member_id:118,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        //
        // }));
        //
        // добавляет пользователя в чат
        //
        // socket.send(JSON.stringify({
        //     cmd: 'chat:members:add',
        //     data: {
        //         user_id: user_id,
        //         chat_id:chat_id,
        //         members_id:'27887',
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        //
        // }));

        // socket.send(JSON.stringify({
        //     cmd: 'chat:member:leave',
        //     data: {
        //         user_id: user_id,
        //         chat_id:28,
        //         userToken: userToken,
        //     }
        //
        // }));


        //message:113631:208

        // socket.send(JSON.stringify({
        //         cmd: 'message:edit',
        //         data: {
        //             user_id: user_id,
        //             chat_id:chat_id,
        //             message_type:0,
        //             message_id:message_id,
        //             userToken:userToken,
        //             text:"отредактированное сообщение"
        //         }
        //
        //     }));

        // socket.send(JSON.stringify({
        //         cmd: 'message:forward',
        //         data: {
        //             user_id: user_id,
        //             chat_id:5,
        //             forward_messages_id:"message:116222:5",
        //             userToken:userToken,
        //         }
        //
        //     }));

        // socket.send(JSON.stringify({
        //     cmd: 'chat:change:name',
        //     data: {
        //         user_id: user_id,
        //         chat_id:161,
        //         chat_name:"новое имя для чата ае",
        //         userToken:userToken,
        //     }
        //
        // }));

        // socket.send(JSON.stringify({
        //     cmd: 'chat:member:search',
        //     data: {
        //         user_id: user_id,
        //         chat_id:161,
        //         search:"77759112603",
        //         userToken:userToken,
        //     }
        //
        // }));


        // socket.send(JSON.stringify({
        //     cmd: 'chat:mute',
        //     data: {
        //         user_id: user_id,
        //         chat_id: chat_id,
        //         userToken: userToken,
        //     }
        //
        // }));


        // socket.send(JSON.stringify({
        //         cmd: 'chat:delete',
        //         data: {
        //             user_id: user_id,
        //             chat_id: chat_id,
        //             userToken: userToken,
        //         }
        //
        //     }));


        // socket.send(JSON.stringify({
        //         cmd: 'user:settings:set',
        //         data: {
        //             user_id: user_id,
        //             settings: {
        //                 "chat_all_mute":1,
        //             },
        //             userToken: userToken,
        //         }
        //
        //     }));
        //
        // socket.send(JSON.stringify({
        //     cmd: 'user:settings:get',
        //     data: {
        //         user_id: user_id,
        //         userToken: userToken,
        //     }
        //
        // }));

        // socket.send(JSON.stringify({
        //     cmd: 'chat:stickers',
        //     data: {
        //         user_id: user_id,
        //         userToken: userToken,
        //     }
        //
        // }));

        // socket.send(JSON.stringify({
        //     cmd: 'set:group:avatar',
        //     data: {
        //         user_id: user_id,
        //         userToken: userToken,
        //         chat_id:14,
        //         file_name:"1DQfnFEjJUvtJjvhy0JEyDgThAHs8q.jpg"
        //     }
        //
        // }));


        // socket.send(JSON.stringify({
        //     cmd: 'contact:save',
        //     data: {
        //         user_id: user_id,
        //         userToken: userToken,
        //         phone:'77076562348'
        //     }
        //
        // }));

        // socket.send(JSON.stringify({
        //     cmd: 'contact:get',
        //     data: {
        //         user_id: user_id,
        //         userToken: userToken,
        //     }
        //
        // }));




    });

    socket.addEventListener('message', function (event) {
        console.log(123123);
        console.log(event.data);


    })


</script>