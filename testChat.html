<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>


</body>
</html>


<script>

    // let socket = new WebSocket('ws://127.0.0.1:9502/');
    let socket = new WebSocket('wss://chat.indigo24.xyz:9502');

    let chatList = false;

    //908102
    socket.addEventListener('open', function (event) {

        socket.send(JSON.stringify({
            cmd: 'init',
            data: {
                user_id: 1,
                userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
            }

        }));

        // socket.send(JSON.stringify({
        //     cmd: 'test:ping',
        //     data: {
        //         user_id: 30220,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        //
        // }));


        // проверяет контакты пользователя
        // check user phone exists
        // socket.send(JSON.stringify({
        //     cmd: 'user:check',
        //     data: {
        //         user_id: 1,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //         phone:'77000000006',
        //     }
        //
        // }));

        // создает чат
        socket.send(JSON.stringify({
            cmd: 'chat:create',
            data: {
                user_id: 1,
                userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
                user_ids:'',
                chat_name:"sad_name",
                type:0,
            }

        }));
        //

        // var images = [{filename: "CjzcZxeEqFKLYAN3wkMt8CTSs0Md6oe.png"},{filename: "CjzcZxeEqFKLYAN3wkMt8CSAoe.png"}];

        // socket.send(JSON.stringify({
        //     cmd: 'message:create',
        //     data: {
        //         user_id:1,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //         chat_id:100000000,
        //         message_type:0,
        //         text:"sad message",
        //     }
        //
        // }));

        // получение всех чатов с пагинацией
        // socket.send(JSON.stringify({
        //     cmd: 'chats:get',
        //     data: {
        //         user_id: 1,
        //         page:1,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        //
        // }));

        // // получение одного чата
        // socket.send(JSON.stringify({
        //     cmd: 'chat:get',
        //     data: {
        //         user_id: 1,
        //         chat_id:18483,
        //         page:1,
        //         divider:1,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        // }));

        // socket.send(JSON.stringify({
        //     cmd: 'chat:members:privileges',
        //     data: {
        //         user_id: 1,
        //         chat_id:27843,
        //         role:2,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //         members:"13,40",
        //     }
        //
        // }));
        //chat:members:delete

        // socket.send(JSON.stringify({
        //     cmd: 'chat:members:delete',
        //     data: {
        //         user_id: 1,
        //         chat_id:27843,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //         members:"13,40",
        //     }
        //
        // }));


        // сделать сообщение прочитанным

        // socket.send(JSON.stringify({
        //     cmd: 'message:write',
        //     data: {
        //         user_id: 30220,
        //         chat_id:104,
        //         message_id:'message:30220:97',
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        //
        // }));

        // socket.send(JSON.stringify({
        //     cmd: 'user:writing',
        //     data: {
        //         user_id: 30220,
        //         chat_id:104,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        //
        // }));


        // принимает строкой список всех пользователей чей онлайн нужно проверить
        // socket.send(JSON.stringify({
        //     cmd: 'user:check:online',
        //     data: {
        //         user_id: 30220,
        //         users_ids:'40,6',
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        //
        // }));


        // выводит список пользователей из чата
        // socket.send(JSON.stringify({
        //     cmd: 'chat:members',
        //     data: {
        //         user_id: 30220,
        //         chat_id:104,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        //
        // }));

        // проверяет есть ли пользователь в чате


        // socket.send(JSON.stringify({
        //     cmd: 'chat:members:check',
        //     data: {
        //         user_id: 1,
        //         chat_id:18482,
        //         member_id:118,
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        //
        // }));
        //
         // добавляет пользователя в чат
        //
        // socket.send(JSON.stringify({
        //     cmd: 'chat:members:add',
        //     data: {
        //         user_id: 113,
        //         chat_id:18483,
        //         members_id:'123,124,189,200',
        //         userToken: "dd3e50f5e7d1118c517a219816fbcafaa2abbbd5_1546883897_1",
        //     }
        //
        // }));





    });

    socket.addEventListener('message',function (event) {
        console.log(event.data);
    })





</script>